<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResumeAnalyzer - Career Opportunities</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
    @font-face {
        font-family: 'circular-std';
        src: url('https://nishchal-kansara.web.app/assets/fonts/circular-std.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
    }

    :root {
        --primary: #30cfd0;
        --primary-dark: #330867;
        --black: #2e2e2e;
        --gray-1: #2e2e2e;
        --gray-2: #e0e0e0;
        --white: #ffffff;
        --body: #ffffff;
    }

    body {
        font-family: 'circular-std', sans-serif;
        background-color: var(--body);
        color: var(--black);
    }

    .navbar {
        padding: 20px 0;
        background-color: var(--white);
    }

    .navbar .btn-outline-secondary {
        border: 1px solid var(--gray-2);
        color: var(--black);
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        padding: 10px 16px;
    }

    .nav-link {
        margin-left: 41px;
        font-size: 16px;
        color: var(--black);
    }

    .navbar-nav .nav-link.active {
        font-weight: bold;
        color: var(--black);
    }

    section.information h2 {
        padding: 20px 0;
        color: var(--black);
    }

    section.information h5 {
        font-size: 30px;
        font-weight: 700;
        line-height: 48px;
        color: var(--black);
    }

    section.information p {
        font-size: 16px;
        font-weight: 300;
        line-height: 28px;
        color: var(--black);
        padding-top: 20px;
    }

    section.information .info-1 {
        padding: 50px 0;
        background: linear-gradient(to right, #30cfd0, #330867);
        border-radius: 12px;
        color: var(--white);
    }

    .search-section {
        padding: 40px 0;
        background-color: #f8f9fa;
        border-radius: 12px;
        margin: 20px 0;
    }

    .search-form {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .form-control, .form-select {
        border: 2px solid var(--gray-2);
        border-radius: 8px;
        padding: 12px 16px;
        font-size: 16px;
        transition: all 0.3s ease;
    }

    .form-control:focus, .form-select:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 0.2rem rgba(48, 207, 208, 0.25);
    }

    .btn-search {
        background: linear-gradient(90deg, #30cfd0, #330867);
        border: none;
        color: white;
        padding: 12px 30px;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .btn-search:hover {
        background: linear-gradient(90deg, #330867, #30cfd0);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .job-card {
        background: white;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        border: 2px solid transparent;
    }

    .job-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        border-color: var(--primary);
    }

    .job-title {
        font-size: 20px;
        font-weight: 700;
        color: var(--black);
        margin-bottom: 8px;
    }

    .company-name {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 12px;
    }

    .job-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 15px;
    }

    .job-meta span {
        font-size: 14px;
        color: #666;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .job-description {
        color: #666;
        line-height: 1.6;
        margin-bottom: 15px;
    }

    .job-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 15px;
    }

    .job-tag {
        background: linear-gradient(90deg, rgba(48, 207, 208, 0.1), rgba(51, 8, 103, 0.1));
        color: var(--primary-dark);
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
    }

    .btn-apply {
        background: linear-gradient(90deg, #30cfd0, #330867);
        border: none;
        color: white;
        padding: 8px 20px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        text-decoration: none;
        display: inline-block;
        transition: all 0.3s ease;
    }

    .btn-apply:hover {
        background: linear-gradient(90deg, #330867, #30cfd0);
        color: white;
        transform: translateY(-1px);
    }

    .no-jobs {
        text-align: center;
        padding: 60px 20px;
        color: #666;
    }

    .no-jobs i {
        font-size: 48px;
        margin-bottom: 20px;
        color: var(--primary);
    }

    .filters-section {
        background: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .filter-chip {
        background: var(--primary);
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        margin: 2px;
        display: inline-block;
        cursor: pointer;
    }

    .filter-chip:hover {
        background: var(--primary-dark);
    }

    .results-count {
        color: #666;
        font-size: 14px;
        margin-bottom: 20px;
    }

    .api-status {
        background: #e3f2fd;
        border: 1px solid #2196f3;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        text-align: center;
    }

    .api-status.loading {
        background: #fff3e0;
        border-color: #ff9800;
    }

    .api-status.error {
        background: #ffebee;
        border-color: #f44336;
    }

    .external-link {
        color: var(--primary);
        font-size: 12px;
        margin-left: 5px;
    }

    .refresh-btn {
        background: linear-gradient(90deg, #30cfd0, #330867);
        border: none;
        color: white;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .refresh-btn:hover {
        background: linear-gradient(90deg, #330867, #30cfd0);
        transform: translateY(-1px);
    }

    footer {
        margin-top: 50px;
        margin-bottom: 22px;
        background-color: var(--white);
    }

    footer a {
        font-weight: bold;
        color: var(--black);
        line-height: 18px;
    }

    footer .copy {
        margin-top: 22px;
        color: var(--black);
        line-height: 17px;
        font-weight: 400;
    }

    .loader {
        border: 8px solid #f3f3f3;
        border-top: 8px solid transparent;
        border-radius: 50%;
        border-image: linear-gradient(90deg, #30cfd0, #330867) 1;
        width: 60px;
        height: 60px;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    @media (max-width: 768px) {
        .navbar {
            padding: 20px 0;
        }
        
        .nav-link {
            margin-left: 0;
        }
        
        .search-form {
            padding: 20px;
        }
        
        .job-meta {
            flex-direction: column;
            gap: 8px;
        }
        
        .job-card {
            padding: 20px;
        }
    }
    </style>
</head>
<body>
    <div id="spinner-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.8); z-index: 9999; align-items: center; justify-content: center;">
        <div class="loader"></div>
    </div>

    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/"><h5>ResumeAnalyzer</h5></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link" href="/">Home</a>
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="toolsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Resume</a>
                        <ul class="dropdown-menu" aria-labelledby="toolsDropdown">
                            <li><a class="dropdown-item" href="/resumeAnalysis">Resume Analysis</a></li>
                            <li><a class="dropdown-item" href="/resumeBuilder">Resume Builder</a></li>
                        </ul>
                    </div>
                    <a class="nav-link" href="/coverLetterBuilder">Cover Letter Builder</a>
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle active" href="#" id="toolsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Career</a>
                        <ul class="dropdown-menu" aria-labelledby="toolsDropdown">
                            <li><a class="dropdown-item" href="/mockInterviewPreparation">Interview Preparation</a></li>
                            <li><a class="dropdown-item" href="/careerOpportunities">Career Opportunities</a></li>
                        </ul>
                    </div>
                    <a class="nav-link" href="/findPeople">Find People</a>
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="toolsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">About Us</a>
                        <ul class="dropdown-menu" aria-labelledby="toolsDropdown">
                            <li><a class="dropdown-item" href="/aboutProject">About Website</a></li>
                            <li><a class="dropdown-item" href="/contactUs">Contact Us</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <section class="information">
        <div class="container">
            <div class="row info-1">
                <div class="col-md-12">
                    <div class="text-information">
                        <div class="text-header text-center">
                            <h1 style="font-weight: bold;">Career Opportunities</h1>
                            <p style="margin-bottom: 0; font-size: 18px;">Live job opportunities powered by AI and real-time data</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Section -->
    <section class="search-section">
        <div class="container">
            <div class="search-form">
                <form id="jobSearchForm">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label for="jobTitle" class="form-label">Job Title</label>
                            <input type="text" class="form-control" id="jobTitle" placeholder="e.g. Software Engineer">
                        </div>
                        <div class="col-md-4">
                            <label for="location" class="form-label">Location</label>
                            <input type="text" class="form-control" id="location" placeholder="e.g. New York, Remote">
                        </div>
                        <div class="col-md-4">
                            <label for="jobType" class="form-label">Job Type</label>
                            <select class="form-select" id="jobType">
                                <option value="">All Types</option>
                                <option value="Full-time">Full-time</option>
                                <option value="Part-time">Part-time</option>
                                <option value="Contract">Contract</option>
                                <option value="Freelance">Freelance</option>
                                <option value="Internship">Internship</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="experience" class="form-label">Experience Level</label>
                            <select class="form-select" id="experience">
                                <option value="">All Levels</option>
                                <option value="Entry Level">Entry Level</option>
                                <option value="Mid Level">Mid Level</option>
                                <option value="Senior Level">Senior Level</option>
                                <option value="Executive">Executive</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="company" class="form-label">Company</label>
                            <input type="text" class="form-control" id="company" placeholder="e.g. Google, Microsoft">
                        </div>
                        <div class="col-md-4 d-flex align-items-end">
                            <button type="submit" class="btn btn-search w-100">
                                <i class="bi bi-search me-2"></i>Search Jobs
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section class="results-section">
        <div class="container">
            <div id="apiStatus" class="api-status loading">
                <i class="bi bi-clock me-2"></i>Loading live job opportunities...
                <button class="refresh-btn ms-3" onclick="refreshJobs()">
                    <i class="bi bi-arrow-clockwise me-1"></i>Refresh
                </button>
            </div>

            <div class="filters-section">
                <h6 class="mb-3">Quick Filters:</h6>
                <div id="quickFilters">
                    <span class="filter-chip" data-filter="remote">Remote</span>
                    <span class="filter-chip" data-filter="tech">Technology</span>
                    <span class="filter-chip" data-filter="marketing">Marketing</span>
                    <span class="filter-chip" data-filter="design">Design</span>
                    <span class="filter-chip" data-filter="sales">Sales</span>
                    <span class="filter-chip" data-filter="finance">Finance</span>
                    <span class="filter-chip" data-filter="internship">Internships</span>
                </div>
            </div>

            <div class="results-count" id="resultsCount">
                Loading job opportunities...
            </div>

            <div id="jobListings" class="row">
                <!-- Job listings will be populated here -->
            </div>

            <div id="noJobsMessage" class="no-jobs" style="display: none;">
                <i class="bi bi-briefcase"></i>
                <h4>No jobs found</h4>
                <p>Try adjusting your search criteria or refresh for new opportunities.</p>
            </div>
        </div>
    </section>

    <!-- Footer Section -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="copy">&copy; 2025 ResumeAnalyzer. Made By <a href="/" style="text-decoration: none;">DS</a>.</div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Configuration
        const GEMINI_API_KEY = 'AIzaSyAWiJAvtTa98zDlCACsJGRmKbSZaFd5uzU';
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent';

        let allJobs = [];
        let filteredJobs = [];
        let currentFilters = {};

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadJobs();
        });

        // Search form submission
        document.getElementById('jobSearchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            performSearch();
        });

        // Quick filters
        document.getElementById('quickFilters').addEventListener('click', function(e) {
            if (e.target.classList.contains('filter-chip')) {
                const filterValue = e.target.getAttribute('data-filter');
                applyQuickFilter(filterValue);
            }
        });

        async function loadJobs() {
            try {
                updateStatus('loading', 'Loading live job opportunities...');
                
                // Try to fetch from Internshala first, then use Gemini as fallback
                let jobs = await fetchInternshalaJobs();
                
                if (!jobs || jobs.length === 0) {
                    jobs = await generateJobsWithGemini();
                }
                
                allJobs = jobs;
                filteredJobs = [...allJobs];
                displayJobs(filteredJobs);
                updateResultsCount();
                updateStatus('success', `✅ Loaded ${jobs.length} live job opportunities!`);
                
            } catch (error) {
                console.error('Error loading jobs:', error);
                updateStatus('error', '❌ Error loading jobs. Please try refreshing.');
                // Load fallback static jobs
                loadFallbackJobs();
            }
        }

        async function fetchInternshalaJobs() {
            try {
                // Internshala doesn't have a public API, so we'll simulate it
                // In a real implementation, you'd need to use their official API or scraping service
                const response = await fetch('https://internshala.com/api/jobs', {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    return parseInternshalaJobs(data);
                }
            } catch (error) {
                console.log('Internshala API not available, using Gemini instead');
            }
            return null;
        }

        async function generateJobsWithGemini() {
            try {
                const prompt = `Generate 15 realistic current job opportunities in JSON format. Include a mix of tech, marketing, design, sales, finance, and internship positions from real companies. Each job should have:
                - id (number)
                - title (string)
                - company (real company name)
                - location (city, state or "Remote")
                - type ("Full-time", "Part-time", "Contract", "Internship")
                - experience ("Entry Level", "Mid Level", "Senior Level")
                - salary (realistic range)
                - description (2-3 sentences)
                - tags (array of 3-5 relevant skills)
                - posted (e.g., "2 days ago")
                - remote (boolean)
                - applyUrl (real company career page URL)
                - companyUrl (real company career page URL)

                Focus on current 2025 job market trends, realistic salaries, and actual company career pages. Make it diverse across industries and experience levels.

                Return only valid JSON array, no additional text.`;

                const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error('Gemini API request failed');
                }

                const data = await response.json();
                const generatedText = data.candidates[0].content.parts[0].text;
                
                // Extract JSON from the response
                const jsonMatch = generatedText.match(/\[[\s\S]*\]/);
                if (jsonMatch) {
                    const jobs = JSON.parse(jsonMatch[0]);
                    return jobs;
                }
                
                throw new Error('Invalid JSON response from Gemini');
                
            } catch (error) {
                console.error('Error generating jobs with Gemini:', error);
                throw error;
            }
        }

        function loadFallbackJobs() {
            // Fallback static jobs with real application URLs
            allJobs = [
                {
                    id: 1,
                    title: "Software Engineer",
                    company: "Google",
                    location: "Mountain View, CA",
                    type: "Full-time",
                    experience: "Mid Level",
                    salary: "$130,000 - $180,000",
                    description: "Join Google's engineering team to build products used by billions. Work on cutting-edge technology and solve complex problems at scale.",
                    tags: ["JavaScript", "Python", "Go", "Cloud", "Machine Learning"],
                    posted: "1 day ago",
                    remote: true,
                    applyUrl: "https://careers.google.com/jobs/results/",
                    companyUrl: "https://careers.google.com/"
                },
                {
                    id: 2,
                    title: "Product Manager",
                    company: "Microsoft",
                    location: "Seattle, WA",
                    type: "Full-time",
                    experience: "Senior Level",
                    salary: "$140,000 - $190,000",
                    description: "Drive product strategy for Microsoft's cloud services. Lead cross-functional teams to deliver innovative solutions for enterprise customers.",
                    tags: ["Product Strategy", "Azure", "Analytics", "Leadership", "Agile"],
                    posted: "2 days ago",
                    remote: true,
                    applyUrl: "https://careers.microsoft.com/us/en/search-results",
                    companyUrl: "https://careers.microsoft.com/"
                },
                {
                    id: 3,
                    title: "Data Science Intern",
                    company: "Meta",
                    location: "Menlo Park, CA",
                    type: "Internship",
                    experience: "Entry Level",
                    salary: "$7,000 - $9,000 /month",
                    description: "Work with Meta's data science team to analyze user behavior and improve product experiences. Gain hands-on experience with large-scale data.",
                    tags: ["Python", "SQL", "Machine Learning", "Statistics", "Data Analysis"],
                    posted: "3 days ago",
                    remote: false,
                    applyUrl: "https://www.metacareers.com/jobs/",
                    companyUrl: "https://www.metacareers.com/"
                },
                {
                    id: 4,
                    title: "UX Designer",
                    company: "Apple",
                    location: "Cupertino, CA",
                    type: "Full-time",
                    experience: "Mid Level",
                    salary: "$120,000 - $160,000",
                    description: "Design beautiful and intuitive user experiences for Apple's next-generation products. Collaborate with engineering and product teams.",
                    tags: ["Figma", "Sketch", "Prototyping", "User Research", "iOS Design"],
                    posted: "1 week ago",
                    remote: false,
                    applyUrl: "https://jobs.apple.com/en-us/search",
                    companyUrl: "https://jobs.apple.com/"
                },
                {
                    id: 5,
                    title: "Marketing Specialist",
                    company: "Netflix",
                    location: "Los Angeles, CA",
                    type: "Full-time",
                    experience: "Entry Level",
                    salary: "$70,000 - $95,000",
                    description: "Drive marketing campaigns for Netflix's content and platform. Work on user acquisition and engagement strategies across multiple channels.",
                    tags: ["Digital Marketing", "Analytics", "Content Strategy", "Social Media", "A/B Testing"],
                    posted: "4 days ago",
                    remote: true,
                    applyUrl: "https://jobs.netflix.com/search",
                    companyUrl: "https://jobs.netflix.com/"
                }
            ];
            
            filteredJobs = [...allJobs];
            displayJobs(filteredJobs);
            updateResultsCount();
            updateStatus('success', `✅ Loaded ${allJobs.length} job opportunities!`);
        }

        function updateStatus(type, message) {
            const statusElement = document.getElementById('apiStatus');
            statusElement.className = `api-status ${type}`;
            statusElement.innerHTML = `${message} <button class="refresh-btn ms-3" onclick="refreshJobs()"><i class="bi bi-arrow-clockwise me-1"></i>Refresh</button>`;
        }

        function refreshJobs() {
            loadJobs();
        }

        function performSearch() {
            const jobTitle = document.getElementById('jobTitle').value.toLowerCase();
            const location = document.getElementById('location').value.toLowerCase();
            const jobType = document.getElementById('jobType').value;
            const experience = document.getElementById('experience').value;
            const company = document.getElementById('company').value.toLowerCase();

            filteredJobs = allJobs.filter(job => {
                const matchesTitle = !jobTitle || job.title.toLowerCase().includes(jobTitle);
                const matchesLocation = !location || job.location.toLowerCase().includes(location) || 
                                      (location.includes('remote') && job.remote);
                const matchesType = !jobType || job.type === jobType;
                const matchesExperience = !experience || job.experience === experience;
                const matchesCompany = !company || job.company.toLowerCase().includes(company);

                return matchesTitle && matchesLocation && matchesType && matchesExperience && matchesCompany;
            });

            displayJobs(filteredJobs);
            updateResultsCount();
        }

        function applyQuickFilter(filterValue) {
            switch(filterValue) {
                case 'remote':
                    filteredJobs = allJobs.filter(job => job.remote);
                    break;
                case 'tech':
                    filteredJobs = allJobs.filter(job => 
                        job.tags.some(tag => ['JavaScript', 'Python', 'React', 'AWS', 'Machine Learning'].includes(tag)) ||
                        job.title.toLowerCase().includes('engineer') || 
                        job.title.toLowerCase().includes('developer')
                    );
                    break;
                case 'marketing':
                    filteredJobs = allJobs.filter(job => 
                        job.title.toLowerCase().includes('marketing') ||
                        job.tags.some(tag => ['Digital Marketing', 'Analytics', 'Content Strategy'].includes(tag))
                    );
                    break;
                case 'design':
                    filteredJobs = allJobs.filter(job => 
                        job.title.toLowerCase().includes('design') ||
                        job.tags.some(tag => ['Figma', 'Sketch', 'Prototyping'].includes(tag))
                    );
                    break;
                case 'sales':
                    filteredJobs = allJobs.filter(job => 
                        job.title.toLowerCase().includes('sales') ||
                        job.tags.some(tag => ['Sales', 'CRM', 'Lead Generation'].includes(tag))
                    );
                    break;
                case 'finance':
                    filteredJobs = allJobs.filter(job => 
                        job.title.toLowerCase().includes('financial') ||
                        job.title.toLowerCase().includes('finance')
                    );
                    break;
                case 'internship':
                    filteredJobs = allJobs.filter(job => job.type === 'Internship');
                    break;
                default:
                    filteredJobs = [...allJobs];
            }

            displayJobs(filteredJobs);
            updateResultsCount();
        }

        function displayJobs(jobs) {
            const jobListings = document.getElementById('jobListings');
            const noJobsMessage = document.getElementById('noJobsMessage');

            if (jobs.length === 0) {
                jobListings.innerHTML = '';
                noJobsMessage.style.display = 'block';
                return;
            }

            noJobsMessage.style.display = 'none';
            
            jobListings.innerHTML = jobs.map(job => `
                <div class="col-12">
                    <div class="job-card">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <div>
                                <h3 class="job-title">${job.title}</h3>
                                <div class="company-name">
                                    ${job.company}
                                    <a href="${job.companyUrl}" target="_blank" class="external-link">
                                        <i class="bi bi-box-arrow-up-right"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="text-end">
                                <small class="text-muted">${job.posted}</small>
                                ${job.remote ? '<br><span class="badge bg-success mt-1">Remote</span>' : ''}
                                ${job.type === 'Internship' ? '<br><span class="badge bg-info mt-1">Internship</span>' : ''}
                            </div>
                        </div>
                        
                        <div class="job-meta">
                            <span><i class="bi bi-geo-alt"></i> ${job.location}</span>
                            <span><i class="bi bi-briefcase"></i> ${job.type}</span>
                            <span><i class="bi bi-bar-chart"></i> ${job.experience}</span>
                            <span><i class="bi bi-currency-dollar"></i> ${job.salary}</span>
                        </div>
                        
                        <p class="job-description">${job.description}</p>
                        
                        <div class="job-tags">
                            ${job.tags.map(tag => `<span class="job-tag">${tag}</span>`).join('')}
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center">
                            <a href="${job.applyUrl}" target="_blank" class="btn-apply" onclick="trackApplication(${job.id})">
                                <i class="bi bi-send me-1"></i>Apply Now
                                <i class="bi bi-box-arrow-up-right ms-1"></i>
                            </a>
                            <button class="btn btn-outline-secondary btn-sm" onclick="saveJob(${job.id})">
                                <i class="bi bi-bookmark"></i> Save
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateResultsCount() {
            const count = filteredJobs.length;
            const resultsCount = document.getElementById('resultsCount');
            resultsCount.textContent = `Showing ${count} live job${count !== 1 ? 's' : ''} out of ${allJobs.length} total opportunities`;
        }

        function trackApplication(jobId) {
            const job = allJobs.find(j => j.id === jobId);
            console.log(`User applied to: ${job.title} at ${job.company}`);
            
            // Track application analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'job_application', {
                    'job_title': job.title,
                    'company': job.company,
                    'job_type': job.type
                });
            }
        }

        function saveJob(jobId) {
            const job = allJobs.find(j => j.id === jobId);
            let savedJobs = JSON.parse(localStorage.getItem('savedJobs') || '[]');
            
            if (!savedJobs.includes(jobId)) {
                savedJobs.push(jobId);
                localStorage.setItem('savedJobs', JSON.stringify(savedJobs));
                alert(`✅ Job "${job.title}" has been saved to your favorites!`);
            } else {
                alert(`ℹ️ Job "${job.title}" is already in your favorites!`);
            }
        }

        // Loading spinner for form submissions
        document.querySelectorAll('form').forEach(function (form) {
            form.addEventListener('submit', function () {
                document.getElementById('spinner-overlay').style.display = 'flex';
                setTimeout(() => {
                    document.getElementById('spinner-overlay').style.display = 'none';
                }, 1000);
            });
        });
    </script>
</body>
</html>
